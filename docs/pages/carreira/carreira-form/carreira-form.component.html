<tce-breadcrumb [items]="[{text: 'Carreira', link: '/dashboard/carreira'}, {text: pageTitle}]"></tce-breadcrumb>
<tce-server-error-messages [server-error-messages]="serverErrorMessages"></tce-server-error-messages>

<div class="card ">
  <div class="card-body">
    <div class="card-header">
      <strong>{{pageTitle}}</strong>
    </div>
    <div class="box section-block">
      <fieldset class="withBorder">
        <legend class="withBorder">Dados da Carreira:</legend>
        <form [formGroup]="resourceForm" (submit)="submitForm()" class="m-l-reset">
          <div class="row">
            <div class="form-group col-md-3">
              <label for="nomeCarreira">Nome da Carreira</label>
              <input type="text"  maxlength="200" class="form-control" id="nomeCarreira" formControlName="nomeCarreira"
                placeholder="Nome da Carreira">
              <app-form-field-error [form-control]="resourceForm.get('nomeCarreira')"> </app-form-field-error>
            </div>
            <div class="form-group col-md-4">
              <label for="nomeOrgao">Órgão</label>
              <ng-select [items]="resOrgaos" required bindLabel="nomeOrgao" bindValue="idOrgao"
                formControlName="idOrgao" placeholder="Selecione um Órgão"
                [ngClass]="{ 'is-invalid': resourceForm.errors }" (change)="changeOrgao($event)">
              </ng-select>
              <app-form-field-error [form-control]="resourceForm.get('idOrgao')"></app-form-field-error>
            </div>
            <div class="form-group col-md-3">
              <label for="nomeCargo">Cargo</label>
              <ng-select [disabled]="true" [items]="resCargoByOrgaos" bindLabel="nomeCargo" bindValue="idCargo"
                (change)="changeCargo()" formControlName="idCargo" placeholder="Selecione um Cargo"
                [(ngModel)]="idCargoEscolhido" [ngClass]="{ 'is-invalid': resourceForm.errors }">
              </ng-select>
              <!-- <app-form-field-error [form-control]="resourceForm.get('idCargo')"></app-form-field-error> -->
              <div class="erroMensagem" id="jaAddCargo"></div>
            </div>
            <div class="form-group col-md-1">
              <label for="acao">Ação</label>
              <button [disabled]="desabilitaBotaoAdicionarCargo" (click)="verificarSeCargoAdicionadoPossuiCarreira()"
                type="button" class="btn btn-default btn-circle form-control" title="Adicionar Cargo">
                <i class="fa fa-plus btn-circle-icon"></i>
              </button>
            </div>
          </div>
          <div class="row">
            <div class="form-group col-md-4"></div>
            <div class="form-group col-md-4">
              <div id="loadingEdit">
                <div class="align">
                    <div class="middle">
                      <svg class="spinner" width="65px" height="65px" viewBox="0 0 66 66"
                        xmlns="http://www.w3.org/2000/svg" style="margin-left: auto; margin-right: auto; display: block;">
                        <circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30">
                        </circle>
                      </svg>
                    </div>
                  </div>
              </div>
            </div>
            <div class="form-group col-md-4">

              <table class="table table-striped" *ngIf='resCargosEscolhidos && resCargosEscolhidos.length'>
                <thead class="thead-light">
                  <tr>
                    <th class="text-center">#</th>
                    <th class="text-center">Descrição do Cargo</th>
                    <th class="text-center">Ação</th>
                  </tr>

                </thead>
                <tbody>
                  <tr *ngFor="let res of resCargosEscolhidos; index as i">
                    <td class="text-center">
                      <small>{{i+1}}</small>
                    </td>
                    <td>
                      <small>{{res.nomeCargo}}</small>
                    </td>
                    <td class="text-center">
                      <a (click)="removerCargoEscolhido(res)"
                        class="btn btn-outline-danger btn-sm mr-2 d-inline text-danger"><i class="fa fa-trash"></i></a>
                    </td>
                  </tr>
                </tbody>
              </table>

              <table class="table table-striped" *ngIf='resCargosEscolhidos.length <=0'>
                <thead class="thead-light">
                  <tr>
                    <th class="text-center">#</th>
                    <th class="text-center">Descrição do Cargo</th>
                    <th class="text-center">Ação</th>
                  </tr>

                </thead>
                <tbody>
                  <tr>
                    <td class="text-center">
                      <small></small>
                    </td>
                    <td class="text-center">
                      <small>Nenhum cargo adicionado</small>
                    </td>
                    <td class="text-center">
                      <small></small>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="form-group col-md-10">
            <div class="form-group active pl-2">
              <input class="form-check-input ng-valid ng-dirty ng-touched" id="ativo" name="ativo" type="checkbox"
                ng-reflect-name="ativo" formControlName="ativo"> <label for="ativo">Ativo</label>
            </div>
          </div>
          <tce-buttons [actions]="actions" [disabled]="resourceForm.invalid" [clear]="false"></tce-buttons>
        </form>
      </fieldset>
    </div>
  </div>
</div>